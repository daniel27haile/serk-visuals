/* ===== Theme & Breakpoints (Serk Visuals) ===== */
$primary:   #0e0e0f;   // deep cinematic black
$secondary: #fafafa;   // clean neutral for content/topbar
$accent:    #ff5722;   // warm orange-red CTA

$bg-dark:   #121212;   // sidebar bg
$bg-darker: #0b0b0c;   // hover/active bg in sidebar
$text:      #f5f5f5;   // bright text on dark
$text-dim:  #b3b3b3;   // subdued sidebar links
$border:    #262626;   // subtle dark border
$bg-app:    #f9f9fb;   // app background (content area)

$bp-sm: 640px;
$bp-md: 768px;
$bp-lg: 1024px;  // laptops and up
$bp-xl: 1280px;

/* ===== Base layout (desktop default) ===== */
.admin-layout {
  min-height: 100dvh;
  display: grid;
  grid-template-columns: 260px 1fr;   /* full sidebar on desktop */
  grid-template-rows: auto 1fr;
  background: $bg-app;

  /* Sidebar */
  .sidebar {
    grid-row: 1 / span 2;
    background: $bg-dark;
    color: $text;
    border-right: 1px solid $border;
    padding: 1rem;
    position: relative;
    z-index: 40;

    .logo {
      margin: .25rem 0 1rem;
      font-weight: 800;
      font-size: 1.1rem;
      color: $text;
    }

    .sidebar__nav {
      display: grid;
      gap: .35rem;

      a {
        display: block;
        color: $text-dim;
        text-decoration: none;
        padding: .6rem .7rem;
        border-radius: .55rem;
        transition: background .2s ease, color .2s ease;

        &:hover       { background: $bg-darker; color: $accent; }
        &.is-active   { background: $accent;   color: $primary; }
        &:focusvisible,
        &:focus-visible { outline: 2px solid $accent; outline-offset: 2px; }
      }
    }
  }

  /* Topbar */
  .topbar {
    grid-column: 2;
    position: sticky; top: 0;
    display: flex; align-items: center; justify-content: space-between;
    gap: .75rem;
    background: $secondary;
    border-bottom: 1px solid #ececf0;
    padding: .65rem .9rem;
    z-index: 30;

    .welcome { margin: 0; font-weight: 600; color: #1a1a1a; }

    .logout-btn {
      background: transparent;
      border: 1px solid #d6d8de;
      padding: .45rem .8rem;
      border-radius: .5rem;
      cursor: pointer;
      color: #1f1f1f;
      transition: background .2s, border-color .2s, color .2s;
      &:hover         { background: #f1f2f5; border-color: #c9cdd6; }
      &:focus-visible { outline: 2px solid $accent; outline-offset: 2px; }
    }

    /* Hamburger: hidden by default (≥ $bp-lg) */
    .menu-btn {
      --size: 36px;
      width: var(--size); height: var(--size);
      display: none;                 /* hidden on laptops/desktops */
      border: 0; background: transparent; cursor: pointer;
      border-radius: .5rem; place-items: center;

      .bar, .bar::before, .bar::after {
        content: "";
        display: block;
        width: 22px; height: 2px;
        background: #111; border-radius: 2px;
        position: relative;
        transition: transform .25s ease;
      }
      .bar::before { position: absolute; top: -7px; }
      .bar::after  { position: absolute; top: 7px; }
    }
  }

  /* Content */
  .main-area {
    grid-column: 2;
    padding: 1.1rem;
    min-width: 0; /* prevent overflow on wide tables/grids */
    color: #161616;
  }

  /* Backdrop (used on ≤ $bp-lg) */
  .backdrop {
    position: fixed; inset: 0;
    background: rgba(0,0,0,.35);
    border: 0; padding: 0; margin: 0;
    z-index: 35; display: none;
  }
}

/* ===== Mobile + Tablets (≤ $bp-lg): off‑canvas drawer, show hamburger ===== */
@media (max-width: $bp-lg) {
  .admin-layout {
    grid-template-columns: 1fr;      /* no fixed sidebar column */
    grid-template-rows: auto 1fr;

    .sidebar {
      position: fixed;
      inset: 0 auto 0 0;
      width: 260px;
      max-width: 86vw;
      transform: translateX(-100%);  /* hidden by default */
      transition: transform .25s ease;
      padding-top: max(1rem, env(safe-area-inset-top));
      box-shadow: 10px 0 28px rgba(0,0,0,.35);
      background: $bg-dark;
    }
    .sidebar.sidebar--open { transform: translateX(0); }

    /* Show hamburger on ≤ $bp-lg */
    .topbar .menu-btn { display: inline-grid; }

    /* When drawer is open: hide hamburger, show backdrop */
    &.drawer-open {
      .topbar .menu-btn { display: none; }
      .backdrop         { display: block; }
    }

    .topbar   { position: sticky; top: 0; }
    .main-area { padding: .9rem; }
  }
}

/* ===== Big desktop polish ===== */
@media (min-width: $bp-xl) {
  .admin-layout {
    grid-template-columns: 280px 1fr;
    .main-area { padding: 1.25rem 1.5rem; }
  }
}

/* ===== Reduced motion ===== */
@media (prefers-reduced-motion: reduce) {
  .admin-layout .sidebar { transition: none; }
}

/* ===== Pretty scrollbars on dark sidebar (optional) ===== */
@media (pointer: fine) {
  .sidebar {
    scrollbar-width: thin;
    scrollbar-color: #3a3f4a transparent;
    &::-webkit-scrollbar { width: 8px; }
    &::-webkit-scrollbar-thumb { background: #3a3f4a; border-radius: 8px; }
  }
}
