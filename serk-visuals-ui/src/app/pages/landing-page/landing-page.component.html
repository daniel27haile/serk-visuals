<!-- HERO -->
<section class="container section hero">
  <div class="copy">
    <h1>Bring your vision to life.</h1> 
    <p class="lead">
      Professional photography & videography, modern website development, and
      hands-on online tutoring in Full-Stack & AWS.
    </p>

    <div class="cta-row">
      <a [routerLink]="['/bookings']" class="btn btn--accent">Book a Session</a>
      <a [routerLink]="['/gallery']" class="btn btn--ghost">View Gallery</a>
    </div>
  </div>

  <div class="hero-media">
    <div
      class="slider"
      (keydown)="onKey($event)"
      tabindex="0"
      aria-roledescription="carousel"
      [attr.aria-label]="'Hero gallery'"
    >
      <div
        class="slides"
        [style.transform]="'translateX(' + -index() * 100 + '%)'"
      >
        <img
          class="slide"
          *ngFor="let s of slider(); trackBy: trackByGallery"
          [src]="s.url"
          [alt]="s.title"
          loading="eager"
          width="1600"
          height="1000"
        />
      </div>

      <div class="nav" aria-hidden="true">
        <button (click)="prev()" aria-label="Previous slide">‹</button>
        <button (click)="next()" aria-label="Next slide">›</button>
      </div>

      <div class="dots" role="tablist" aria-label="Slide selectors">
        <button
          class="dot"
          *ngFor="let _ of slider(); let i = index"
          [class.active]="i === index()"
          (click)="go(i)"
          [attr.aria-label]="'Go to slide ' + (i + 1)"
          role="tab"
          [attr.aria-selected]="(i === index()).toString()"
        ></button>
      </div>
    </div>

    <p
      class="hint"
      *ngIf="!loadingSlider() && slider().length === 0 && !errorSlider()"
    >
      No slider images yet. Add some in Admin → Gallery (placement: slider).
    </p>
    <p class="hint error" *ngIf="errorSlider()">{{ errorSlider() }}</p>
  </div>
</section>

<!-- SERVICES -->
<section class="container section">
  <h2 class="section-heading">Services</h2>

  <div class="grid services">
    <article class="svc" *ngFor="let svc of services">
      <div class="svc__glow"></div>
      <div class="svc__icon" aria-hidden="true">{{ svc.icon }}</div>
      <h3>{{ svc.title }}</h3>
      <p class="lead clamp-2">{{ svc.copy }}</p>
      <ul class="svc__bullets">
        <li *ngFor="let b of svc.bullets">{{ b }}</li>
      </ul>
      <a [routerLink]="svc.ctaLink" class="svc__cta">{{ svc.ctaText }}</a>
    </article>
  </div>
</section>

<!-- FEATURED GALLERY -->
<section class="container section">
  <h2 class="section-heading">Featured Gallery</h2>

  <div class="grid gallery">
    <img
      *ngFor="let f of featured(); trackBy: trackByGallery"
      [src]="f.thumbnail || f.url"
      [alt]="f.title"
      loading="lazy"
      width="1200"
      height="800"
    />
  </div>

  <p
    class="hint"
    *ngIf="!loadingFeatured() && featured().length === 0 && !errorFeatured()"
  >
    No featured items yet. Add some in Admin → Gallery (placement: featured).
  </p>
  <p class="hint error" *ngIf="errorFeatured()">{{ errorFeatured() }}</p>

  <div class="button-group">
    <a [routerLink]="['/gallery']" class="btn btn--ghost">See More</a>
    <a [routerLink]="['/bookings']" class="btn btn--accent">Book a Session</a>
  </div>
</section>

<!-- TESTIMONIALS -->
<section class="container section">
  <h2 class="section-heading">Client Stories</h2>

  <div
    class="testimonial-slider"
    tabindex="0"
    (keydown)="onKeyTestimonial($event)"
    aria-roledescription="carousel"
    [attr.aria-label]="'Client testimonials'"
  >
    <div
      class="t-slides"
      [style.transform]="'translateX(' + -tIndex() * 100 + '%)'"
    >
      <figure
        class="t-slide"
        *ngFor="let t of testimonials(); trackBy: trackByTestimonial"
      >
        <div class="t-header">
          <img
            *ngIf="t.avatar"
            class="t-avatar"
            [src]="t.avatar"
            [alt]="t.author"
            width="64"
            height="64"
            loading="lazy"
          />
          <figcaption>
            <span class="author">{{ t.author }}</span>
            <span class="role" *ngIf="t.role">— {{ t.role }}</span>
          </figcaption>
        </div>

        <blockquote class="quote">“{{ t.quote }}”</blockquote>
      </figure>
    </div>

    <div class="t-nav" aria-hidden="true">
      <button (click)="tPrev()" aria-label="Previous testimonial">‹</button>
      <button (click)="tNext()" aria-label="Next testimonial">›</button>
    </div>

    <div class="t-dots" role="tablist" aria-label="Testimonial selectors">
      <button
        class="t-dot"
        *ngFor="let _ of testimonials(); let i = index"
        [class.active]="i === tIndex()"
        (click)="tGo(i)"
        [attr.aria-label]="'Go to testimonial ' + (i + 1)"
        role="tab"
        [attr.aria-selected]="(i === tIndex()).toString()"
      ></button>
    </div>
  </div>

  <p
    class="hint"
    *ngIf="
      !loadingTestimonials() &&
      testimonials().length === 0 &&
      !errorTestimonials()
    "
  >
    No testimonials yet. Add them in Admin → Testimonials.
  </p>
  <p class="hint error" *ngIf="errorTestimonials()">
    {{ errorTestimonials() }}
  </p>
</section>
