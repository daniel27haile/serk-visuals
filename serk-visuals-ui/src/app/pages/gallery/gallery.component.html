<section class="gallery">
  <h1>Gallery</h1>

  <div class="tabs">
    <button *ngFor="let a of albums"
            [class.is-active]="album() === a"
            (click)="setAlbum(a)">
      {{ a }}
    </button>
    <button [class.is-active]="!album()" (click)="setAlbum('')">all</button>
  </div>

  <div class="gallery__grid">
    <article class="gallery__item" *ngFor="let it of (items() ?? []); trackBy: trackById">
      <img [src]="it.thumbnail || it.url" [alt]="it.title" loading="lazy" />
      <div class="gallery__item-body">
        <h4 [attr.title]="it.title">{{ it.title }}</h4>
        <p class="muted"
           [attr.title]="joinTags(it.tags) || null">
          {{ it.album }}
          <ng-container *ngIf="(it.tags?.length ?? 0) > 0">
            Â· {{ joinTags(it.tags) }}
          </ng-container>
        </p>
      </div>
    </article>
  </div>

  <p class="hint" *ngIf="error()">{{ error() }}</p>
  <p class="hint" *ngIf="!error() && ((items()?.length ?? 0) === 0)">No items.</p>

  <nav class="pager" *ngIf="pages() > 1">
    <button [disabled]="page()===1" (click)="goto(page()-1)">Prev</button>
    <span>Page {{ page() }} of {{ pages() }}</span>
    <button [disabled]="page()===pages()" (click)="goto(page()+1)">Next</button>
  </nav>
</section>
